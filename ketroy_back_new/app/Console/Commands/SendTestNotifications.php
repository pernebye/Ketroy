<?php

namespace App\Console\Commands;

use App\Models\Notification;
use App\Models\User;
use Illuminate\Console\Command;

class SendTestNotifications extends Command
{
    protected $signature = 'notify:test {phone : ĞĞ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 7474747485)}';

    protected $description = 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ²ÑĞµÑ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ´Ğ»Ñ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ';

    /**
     * Ğ’ÑĞµ Ñ‚Ğ¸Ğ¿Ñ‹ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ
     */
    private function getNotificationTemplates(): array
    {
        return [
            // === ĞŸĞ¾Ğ´Ğ°Ñ€ĞºĞ¸ ===
            [
                'label' => 'gift',
                'title' => 'Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº! ğŸ',
                'body' => 'ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼! Ğ’Ğ°Ğ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ ÑĞºÑĞºĞ»ÑĞ·Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº Ğ¾Ñ‚ KETROY. ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞµĞ³Ğ¾ Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ "ĞœĞ¾Ğ¸ Ğ¿Ğ¾Ğ´Ğ°Ñ€ĞºĞ¸".',
                'source_id' => 1,
            ],
            [
                'label' => 'gift',
                'title' => 'ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº Ğ¶Ğ´Ñ‘Ñ‚ Ğ²Ğ°Ñ!',
                'body' => 'Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº Ğ·Ğ° Ğ²Ğ°ÑˆÑƒ Ğ»Ğ¾ÑĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ. ĞĞµ ÑƒĞ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞµĞ³Ğ¾!',
                'source_id' => 2,
            ],
            
            // === Ğ‘Ğ¾Ğ½ÑƒÑÑ‹ ===
            [
                'label' => 'bonus',
                'title' => 'ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ°',
                'body' => 'Ğ’Ğ°Ğ¼ Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¾ 500 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ². Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ!',
                'source_id' => null,
            ],
            [
                'label' => 'bonus',
                'title' => 'Ğ‘Ğ¾Ğ½ÑƒÑÑ‹ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ñ‹! ğŸ’°',
                'body' => 'ĞĞ° Ğ²Ğ°Ñˆ ÑÑ‡Ñ‘Ñ‚ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¾ 1250 Ğ±Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ñ… Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² Ğ·Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ Ğ² Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğµ KETROY Almaty.',
                'source_id' => null,
            ],
            [
                'label' => 'bonus',
                'title' => 'Ğ”Ğ²Ğ¾Ğ¹Ğ½Ñ‹Ğµ Ğ±Ğ¾Ğ½ÑƒÑÑ‹!',
                'body' => 'Ğ’Ğ°Ğ¼ Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¾ 2000 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² Ğ² Ñ€Ğ°Ğ¼ĞºĞ°Ñ… Ğ°ĞºÑ†Ğ¸Ğ¸ "Ğ”Ğ²Ğ¾Ğ¹Ğ½Ñ‹Ğµ Ğ±Ğ¾Ğ½ÑƒÑÑ‹". ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‚ÑŒÑ‚Ğµ Ğ¸Ñ… Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ÑƒÑ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ!',
                'source_id' => null,
            ],
            
            // === Ğ¡ĞºĞ¸Ğ´ĞºĞ¸ Ğ¸ Ğ°ĞºÑ†Ğ¸Ğ¸ ===
            [
                'label' => 'discount',
                'title' => 'Ğ¡ĞºĞ¾Ñ€Ğ¾ Ğ²Ğ°Ñˆ Ğ´ĞµĞ½ÑŒ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ! ğŸ‚',
                'body' => 'ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ Ğ½Ğ°ÑÑ‚ÑƒĞ¿Ğ°ÑÑ‰Ğ¸Ğ¼ Ğ´Ğ½ĞµĞ¼ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ¸ Ğ´Ğ°Ñ€Ğ¸Ğ¼ Ğ²Ğ°Ğ¼ ÑĞºĞ¸Ğ´ĞºÑƒ -30% Ğ½Ğ° Ğ²ÑĞµ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸. Ğ¡ĞºĞ¸Ğ´ĞºĞ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ° 5 Ğ´Ğ½ĞµĞ¹!',
                'source_id' => null,
            ],
            [
                'label' => 'discount',
                'title' => 'ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞºĞ¸Ğ´ĞºĞ° Ğ´Ğ»Ñ Ğ²Ğ°Ñ!',
                'body' => 'Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ! Ğ¡ĞºĞ¸Ğ´ĞºĞ° 20% Ğ½Ğ° Ğ²ÑÑ Ğ½Ğ¾Ğ²ÑƒÑ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ĞºĞ¾Ğ´ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸.',
                'source_id' => null,
            ],
            [
                'label' => 'discount',
                'title' => 'Black Friday Ğ² KETROY! ğŸ–¤',
                'body' => 'Ğ¡ĞºĞ¸Ğ´ĞºĞ¸ Ğ´Ğ¾ 50% Ğ½Ğ° Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹. ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¾!',
                'source_id' => null,
            ],
            
            // === Ğ¡ĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ ===
            [
                'label' => 'certificate',
                'title' => 'Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚! ğŸ’³',
                'body' => 'Ğ’Ğ°Ğ¼ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¸Ğ»Ğ¸ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ Ğ½Ğ° ÑÑƒĞ¼Ğ¼Ñƒ 50 000 Ñ‚ĞµĞ½Ğ³Ğµ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ĞµĞ³Ğ¾ Ğ² Ğ»ÑĞ±Ğ¾Ğ¼ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğµ KETROY.',
                'source_id' => 1,
            ],
            [
                'label' => 'certificate',
                'title' => 'Ğ¡Ñ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ° Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚!',
                'body' => 'Ğ¡Ñ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ° Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğº ĞºĞ¾Ğ½Ñ†Ñƒ. Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞµĞ³Ğ¾ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 7 Ğ´Ğ½ĞµĞ¹!',
                'source_id' => 2,
            ],
            
            // === Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ ===
            [
                'label' => 'info',
                'title' => 'ĞĞ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ ÑƒĞ¶Ğµ Ğ² Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ°Ñ…! ğŸ‘•',
                'body' => 'Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ°Ğ¹Ñ‚Ğµ Ğ²ĞµÑĞµĞ½Ğ½ÑÑ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ 2025! Ğ—Ğ°Ğ³Ğ»ÑĞ½Ğ¸Ñ‚Ğµ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğ¹ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½ KETROY Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸.',
                'source_id' => null,
            ],
            [
                'label' => 'info',
                'title' => 'ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ',
                'body' => 'ĞœÑ‹ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸! Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸.',
                'source_id' => null,
            ],
            
            // === ĞŸÑ€Ğ¾Ğ¼Ğ¾ Ğ¸ Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³ ===
            [
                'label' => 'promo',
                'title' => 'Ğ­ĞºÑĞºĞ»ÑĞ·Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ! â­',
                'body' => 'Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ²Ğ°Ñ: Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ°Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ½Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ Ğ¾Ñ‚ 30 000 Ñ‚ĞµĞ½Ğ³Ğµ. Ğ”ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° Ğ½ĞµĞ´ĞµĞ»Ğ¸.',
                'source_id' => null,
            ],
            [
                'label' => 'promo',
                'title' => 'ĞŸÑ€Ğ¸Ğ²ĞµĞ´Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ° â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸ Ğ±Ğ¾Ğ½ÑƒÑÑ‹!',
                'body' => 'ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑĞ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ° Ğ² KETROY Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ 1000 Ğ±Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ñ… Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² Ğ·Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ.',
                'source_id' => null,
            ],
            
            // === ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ ===
            [
                'label' => 'reminder',
                'title' => 'Ğ’Ñ‹ Ğ´Ğ°Ğ²Ğ½Ğ¾ Ğ½Ğµ Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ğ»Ğ¸ ğŸ‘‹',
                'body' => 'Ğ¡ĞºÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ¾ Ğ²Ğ°Ğ¼! Ğ—Ğ°Ğ³Ğ»ÑĞ½Ğ¸Ñ‚Ğµ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ â€” Ğ´Ğ»Ñ Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ.',
                'source_id' => null,
            ],
            [
                'label' => 'reminder',
                'title' => 'Ğ’Ğ°ÑˆĞ¸ Ğ±Ğ¾Ğ½ÑƒÑÑ‹ ÑĞºĞ¾Ñ€Ğ¾ ÑĞ³Ğ¾Ñ€ÑÑ‚! ğŸ”¥',
                'body' => '2500 Ğ±Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ñ… Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² Ğ±ÑƒĞ´ÑƒÑ‚ Ğ°Ğ½Ğ½ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ñ‡ĞµÑ€ĞµĞ· 7 Ğ´Ğ½ĞµĞ¹. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¸Ñ… Ğ½Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ!',
                'source_id' => null,
            ],
            
            // === Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ===
            [
                'label' => 'system',
                'title' => 'ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½',
                'body' => 'Ğ’Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹. Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ°ĞºÑ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸!',
                'source_id' => null,
            ],
            [
                'label' => 'test',
                'title' => 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ',
                'body' => 'Ğ­Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ KETROY. Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ ĞµĞ³Ğ¾ â€” Ğ²ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾!',
                'source_id' => null,
            ],
        ];
    }

    public function handle()
    {
        $phone = $this->argument('phone');
        
        // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ + ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ
        $phone = ltrim($phone, '+');
        
        // Ğ˜Ñ‰ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
        $user = User::where('phone', $phone)
            ->orWhere('phone', 'LIKE', '%' . substr($phone, -10))
            ->first();
        
        if (!$user) {
            $this->error("ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ¾Ğ¼ {$phone} Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½!");
            return 1;
        }
        
        $this->info("ĞĞ°Ğ¹Ğ´ĞµĞ½ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: {$user->name} {$user->surname} (ID: {$user->id})");
        $this->info("Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: {$user->country_code}{$user->phone}");
        $this->newLine();
        
        // Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
        if ($this->confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿ĞµÑ€ĞµĞ´ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ñ…?', false)) {
            $deleted = Notification::where('user_id', $user->id)->delete();
            $this->warn("Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾ {$deleted} ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹.");
        }
        
        $templates = $this->getNotificationTemplates();
        $created = 0;
        
        $this->info("Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹...");
        $bar = $this->output->createProgressBar(count($templates));
        $bar->start();
        
        foreach ($templates as $index => $template) {
            // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ñ Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹Ğ»Ğ¸ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ created_at
            Notification::create([
                'user_id' => $user->id,
                'title' => $template['title'],
                'body' => $template['body'],
                'is_read' => false,
                'label' => $template['label'],
                'source_id' => $template['source_id'],
                'created_at' => now()->subMinutes(count($templates) - $index), // Ğ Ğ°Ğ·Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
            ]);
            
            $created++;
            $bar->advance();
            
            // ĞĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ Ğ¿Ğ°ÑƒĞ·Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
            usleep(50000); // 50ms
        }
        
        $bar->finish();
        $this->newLine(2);
        
        $this->info("âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ {$created} Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ {$user->name}!");
        $this->newLine();
        
        // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼
        $this->table(
            ['Ğ¢Ğ¸Ğ¿ (label)', 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾'],
            collect($templates)
                ->groupBy('label')
                ->map(fn($items, $label) => [$label, $items->count()])
                ->values()
                ->toArray()
        );
        
        return 0;
    }
}








